{%extends 'Staff/base.html'%}
{%load static %}
{% block title %} Chat {%endblock%}


<main>
{% block content %}




<h2>Chat with {{ other_user.username }}</h2>
{% if not messages %}
  <p>No messages yet. Start the conversation!</p>
{% endif %}

<div id="chat-box">
  {% for message in messages %}
    <div class="{% if message.sender == user %}sent{% else %}received{% endif %}">
      <strong>{{ message.sender.username }}:</strong> {{ message.content }}
    </div>
  {% endfor %}
</div>

<form method="post">
  {% csrf_token %}
  <textarea name="content" required></textarea>
  <button type="submit">Send</button>
</form>

<script>
// Auto-refresh every 5s
setInterval(() => location.reload(), 5000);
</script>




{%endblock%}
</main>